"use strict";

var _require = require("chai"),
    expect = _require.expect;

var getPrecompiler = require("./");

var preCompile = void 0,
    cache = void 0;

describe("preCompiler", function () {

  beforeEach(function () {
    cache = {};

    preCompile = getPrecompiler(function (source) {
      return source + "a";
    }, cache);
  });

  it("should use the compiler provided", function () {
    var result = preCompile("a", "filename");

    expect(result).to.be.equal("aa");
  });

  it("if no compiler provided should return without modification", function () {
    preCompile = getPrecompiler(null, cache);

    var result = preCompile("a", "filename");

    expect(result).to.be.equal("a");
  });

  it("should cache", function () {
    var result = preCompile("a", "filename");

    expect(cache.filename).to.be.equal("aa");
  });

  it("should return the cached", function () {
    cache.filename = "b";

    var result = preCompile("a", "filename");

    expect(cache.filename).to.be.equal("b");
  });
});