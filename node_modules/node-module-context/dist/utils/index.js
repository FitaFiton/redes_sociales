"use strict";

var fs = require("fs"),
    _require = require("../constants"),
    coreModules = _require.coreModules;

var fsCache = {};

module.exports = {
  readFileSync: function readFileSync() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    var filename = args[0],
        cached = fsCache[filename];

    if (cached) {
      return cached;
    }

    return fsCache[filename] = fs.readFileSync.apply(fs, args);
  },
  removeShebang: function removeShebang(content) {
    var contLen = content.length;

    if (contLen >= 2) {
      if (content.charCodeAt(0) === 35 && content.charCodeAt(1) === 33) {
        if (contLen === 2) {
          content = "";
        } else {
          var i = 2;

          for (; i < contLen; ++i) {
            var code = content.charCodeAt(i);

            if (code === 10 || code === 13) break;
          }
          if (i === contLen) content = "";else {
            content = content.slice(i);
          }
        }
      }
    }

    return content;
  },

  useRequire: function useRequire(id) {
    return coreModules.indexOf(id) > -1;
  }
};